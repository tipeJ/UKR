#+TITLE: UKR
#+AUTHOR: Tiitus JÃ¤rvinen

* Features

** Playlist support
   
* Objectives
** TODO Clean old implementation
*** TODO Clean api_provider
    Currently has a lot of deprecated endpoints that are now used in the UKProvider class
*** TODO Clean up providers
    The following providers are no longer used:
    1. Main_Provider
    2. Application_Provider
    3. Item_Provider
       
** Wide-Screen support
   The layout could look somewhat like this:
   | Appbar  | Appbar  | Appbar            |
   |---------+---------+-------------------|
   | Content | Content | Remote            |
   | Content | Content | Remote            |
   | Content | Content | Remote            |
   | Seekbar | Seekbar | Playback Controls |
   
   "Content" being either playlist or content browser.
   
** Desktop layout
*** TODO Native menubar instead of mobile appbar for desktop builds.
*** TODO Drag'n Drop
** Playlist controlling

*** DONE Remove items
    CLOSED: [2020-12-09 ke 17:27]
    Implement via custom menu?

*** TODO Implement move via remove/insert instead of individual swaps.
*** TODO Display current item

*** Add items

**** TODO Add via dialog (Android/iOS)

**** TODO Add via content browser / bookmarks

**** Drag- n' drop on desktop?
     
*** DONE Move items
    CLOSED: [2020-12-08 ti 19:31]
    Sync accuracy should be monitored. Current solution does not verify the change via the API, as the plugin reorderable_list required syncronous solution.

*** DONE Switch current item
    CLOSED: [2020-12-07 ma 23:36]

*** DONE Sync items
    CLOSED: [2020-12-07 ma 22:13]

** TODO Text input request handling
** TODO Bookmarks
   Sources:
   * Web
** TODO [#B] Poster background completion
   Currently the poster background contains only the label for the currently playing item.
*** DONE [#A] Movies
    CLOSED: [2020-12-11 pe 16:07]
    * Title
    * Year
    * Director
    * Rating
    * Duration?

*** DONE [#B] TV
    CLOSED: [2020-12-11 pe 16:07]
    Same as movies, but producers instead of directors. Additionally:
    * Season
    * Episode

*** [#C] Audio
    * Year
    * Rating
    * Disc
    * Track number
    * Artist
    * Album

** TODO [#C] Advanced remote controls
   Implementation for most of the commands in Input.Executeaction.
   Most important ones:
   + Cycle Subtitle
   + Bookmark
   + Parent folder
   + Fast forwarding
   + Stickied shortcuts for addons, movies, etc.
   + Player view modes
   + Chapter navigation
   + Player Debug/ Process info

   Maybe even touch scrolling pad :thinking
   Probably should be included in a separate screen.
   
** TODO Movie/TV Show cast
   the cast parameter returns an insane number of items.

*** DONE Movies
    CLOSED: [2020-12-20 su 18:48]

*** TODO TV

** TODO Advanced player management

*** DONE Automatic latest player selection on startup
    CLOSED: [2020-12-15 ti 14:38]
    Currently takes the first player in the storage box.

*** TODO Player deletion

*** TODO Player editing

*** TODO Player Password/Username implementation
    Current implementation does not support auth.

** TODO Content browsing
   
*** TODO [#C] Add-Ons
    Browse All add-ons quickly and efficiently.
    Should be quickly accessible from the remote screen.
    
*** TODO Files
    Not nearly as important, as I don't really use this feature all that much yet.
    
** TODO Add manual reconnect and disconnect notification.
** TODO Notifications

*** TODO Android
    
*** TODO iOS / iPadOS
    
*** Desktop??
    No API exists yet for environments like KDE or Windows. Perhaps I should create that myself if it seems to take too long..?
* Known Issues / Bugs

** DONE Player switcher doesn't actually change the player value of the multiprovider providers
   CLOSED: [2020-12-15 ti 22:39]
   Strange...

*** DONE Check with other stream.
    CLOSED: [2020-11-27 pe 21:42]
    Current fix has the stream pause before redefining the subscription
    #+BEGIN_SRC dart
      this._subscription.pause();
      this._subscription = ...;
      this._subscription.resume();
    #+END_SRC

    Needs to be checked with localhost player. Might cause memory leaks, or might not work as expected when there are two valid streams instead of just one.

*** TODO Check for memory leaks (With devtools on Android emulator)

** DONE Fix local player(s) not going through with the API network check
   CLOSED: [2020-12-18 pe 20:21]

** DONE Android UKProvider doesn't receive any data
   CLOSED: [2020-12-15 ti 22:39]
   Works in emulator, not with real device (H910). The provider reads audio change events, but doesn't do anything with the data.
   The receiver sometimes reports an object sent by XBMC, describing a parse error. Works neither in release nor debug mode. Profile not tested.
   Cause unknown, no issues reported on a debug instance running on an emulator (API 30)

*** Tests
    Not caused by encoding command being run in an isolate function. The behaviour persists on non-isolate version.

** DONE Totaltime doesn't appear when starting a new item playback
   CLOSED: [2020-12-15 ti 22:39]
   Causes the seekbar to show the live tag even though the stream may be seekable.

** TODO Time and totaltime sometimes not syncing when navigating in the playlist
   
** TODO Current item shows unknown item when playback is stopped
