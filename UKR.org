#+TITLE: UKR
#+AUTHOR: Tiitus JÃ¤rvinen

* Objectives
** DONE [#A] Migrate to Sound null safety
   CLOSED: [2020-11-25 ke 14:54]
** DONE [#A] Migrade to WebSocket
   CLOSED: [2020-11-29 su 21:19]
   Old providers are deprecated. Not yet cleaned up.
** TODO Clean old implementation
*** TODO Clean api_provider
    Currently has a lot of deprecated endpoints that are now used in the UKProvider class
*** TODO Clean up providers
    The following providers are no longer used:
    1. Main_Provider
    2. Application_Provider
    3. Item_Provider
       
** TODO [#B] Poster background completion
   Currently the poster background contains only the label for the currently playing item.

*** [#A] Movies
    * Title
    * Year
    * Director
    * Rating
    * Duration?

*** [#B] TV
    Same as movies, but producers instead of directors. Additionally:
    * Season
    * Episode

*** [#C] Audio
    * Year
    * Rating
    * Disc
    * Track number
    * Artist
    * Album

** DONE Playback controls
   CLOSED: [2020-11-29 su 20:26]
   Still not implemented:
   * Short Rewind/Skip
   * Prev/Next
** TODO [#A] Seekbar
   Implement the seekbar properly. Currently has a placeholder but does not work.

*** DONE [#A] Implement LIVE tag
    CLOSED: [2020-11-25 ke 15:20]
    For when the stream is not seekable.

*** TODO [#B] Seek

** TODO [#B] Playlist Support

** TODO Advanced player management

*** TODO Automatic latest player selection on startup
    Currently takes the first player in the storage box.

*** TODO Player deletion

*** TODO Player editing

*** TODO Player Password/Username implementation
    Current implementation does not support auth.

** TODO Content browsing
   
*** TODO [#C] Add-Ons
    Browse All add-ons quickly and efficiently.
    Should be quickly accessible from the remote screen.
    
*** TODO Files
    Not nearly as important, as I don't really use this feature all that much yet.
    
* Known Issues / Bugs

** DONE Launch Screen render error
   CLOSED: [2020-11-25 ke 14:56]
   Flashes for a little while when opening the application for the first time. Should be easily fixed by implementing null player item check.

   
** DONE Playback controls overflow error
   CLOSED: [2020-11-25 ke 15:26]
   Control buttons overflow on very narrow screen. As this is written, implemented by the following line:

    #+BEGIN_SRC dart
      final _contSize = min(40.0, MediaQuery.of(context).size.width / 6 - 28.0);
    #+END_SRC

** TODO Player switcher doesn't actually change the player value of the multiprovider providers
   Strange...

*** DONE Check with other stream.
    CLOSED: [2020-11-27 pe 21:42]
    Current fix has the stream pause before redefining the subscription
    #+BEGIN_SRC dart
      this._subscription.pause();
      this._subscription = ...;
      this._subscription.resume();
    #+END_SRC

    Needs to be checked with localhost player. Might cause memory leaks, or might not work as expected when there are two valid streams instead of just one.

*** TODO Check for memory leaks (With devtools on Android emulator)

** TODO Fix local player(s) not going through with the API network check
